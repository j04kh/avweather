(this["webpackJsonpav-weather"]=this["webpackJsonpav-weather"]||[]).push([[0],{13:function(t,e,c){},33:function(t,e,c){},43:function(t,e,c){"use strict";c.r(e);var n=c(0),a=c.n(n),s=c(16),r=c.n(s),i=(c(33),c(12)),o=c(3),l=c(8),j=(c(13),c.p+"static/media/logo.19da3b99.png"),h=c(27),m=c.n(h),u=c(1),d=function(){var t=Object(n.useState)(""),e=Object(l.a)(t,2),c=e[0],a=e[1],s=Object(n.useState)("OK"),r=Object(l.a)(s,2),i=r[0],h=r[1],d=Object(o.f)(),f="https://avwx.rest/api/station/".concat(c,"?&format=json"),b="".concat("Ex1m3Sv8KRhS4iHe_YKWmsPA7hhUNIfHOC4OEkKbTmQ"),x=function(){h("ERROR"),setTimeout((function(){h("OK")}),2200)};return Object(u.jsx)("div",{className:"main",children:Object(u.jsxs)("div",{className:"home justify-center items-center",children:[Object(u.jsx)("img",{src:j,alt:"logo"}),Object(u.jsx)("h1",{children:"AvWeather"}),Object(u.jsxs)("form",{className:"search ",onChange:function(t){return a(t.target.value)},onSubmit:function(t){return function(t){t.preventDefault(),a(""),fetch(f,{headers:{Authorization:"TOKEN ".concat(b)}}).then((function(t){return t.ok?d.push("/station/".concat(c)):x()}))}(t)},children:[Object(u.jsx)("input",{type:"text",placeholder:"Airport ICAO code...",value:c}),Object(u.jsx)("button",{className:"material-icon",type:"submit",children:Object(u.jsx)(m.a,{className:"material-icon primary"})})]}),Object(u.jsx)("p",{className:"error-".concat(i),children:"Error: Airport not found"})]})})},f=c(14),b=c.n(f),x=c(18),O=c.n(x),p=function(t){var e=Object(o.g)().coords,c=Object(o.f)(),n="".concat("AIzaSyAw_96zJQPmvu3kANMnNbclUzUE6UuXGFs"),a="https://www.google.com/maps/embed/v1/view?\n\t\t\t\t\t\t\t\t\t\tcenter=".concat(e,"&\n\t\t\t\t\t\t\t\t\t\tzoom=13&\n\t\t\t\t\t\t\t\t\t\tkey=").concat(n,"&\n\t\t\t\t\t\t\t\t\t\tmaptype=satellite");return Object(u.jsxs)("div",{className:"main",children:[Object(u.jsxs)("div",{className:"nav flex-row",children:[Object(u.jsx)("button",{onClick:function(t){c.goBack()},className:"material-icon left",children:Object(u.jsx)(b.a,{className:"material-icon"})}),Object(u.jsx)("h2",{className:"material-icon medium",children:"Location"}),Object(u.jsx)(O.a,{className:"invisible right"})]}),Object(u.jsx)("div",{className:"home",children:Object(u.jsx)("div",{className:"home  items-center",children:Object(u.jsx)("iframe",{className:"map",title:"maps",src:a})})})]})},v=c(15),N=c.n(v),w=c(19),g=function(){var t=Object(o.g)().ident,e="https://avwx.rest/api/station/".concat(t,"?&format=json"),c="https://avwx.rest/api/metar/".concat(t,"?&format=json"),a="https://avwx.rest/api/taf/".concat(t,"?&format=json"),s="".concat("Ex1m3Sv8KRhS4iHe_YKWmsPA7hhUNIfHOC4OEkKbTmQ"),r=Object(n.useState)({}),i=Object(l.a)(r,2),j=i[0],h=i[1],m=Object(n.useState)({}),d=Object(l.a)(m,2),f=d[0],x=d[1],p=Object(n.useState)({}),v=Object(l.a)(p,2),g=v[0],y=v[1],E=Object(n.useState)("vmc"),A=Object(l.a)(E,2),_=A[0],k=A[1],S=Object(n.useState)({metar:!0,taf:!0,info:!0}),K=Object(l.a)(S,2),M=K[0],T=K[1],I=Object(o.f)(),C=function(){var t=Object(w.a)(N.a.mark((function t(){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e,{headers:{Authorization:"TOKEN ".concat(s)}}).then((function(t){return t.json()})).then((function(t){var e={iata:t.iata,icao:t.icao,lat:t.latitude,lon:t.longitude,name:t.name,country:t.country,runways:t.runways,elev_ft:t.elevation_ft,elev_m:t.elevation_m};h(e),T({info:!1})})).catch((function(t){return console.log("Station fetch error: "+t)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),R=function(){var t=Object(w.a)(N.a.mark((function t(){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(c,{headers:{Authorization:"TOKEN ".concat(s)}}).then((function(t){return t.json()})).then((function(t){t.flight_rules.includes("IFR")?k("imc"):k("vmc");var e=D(t),c={raw:t.raw,flight_rules:t.flight_rules,wind_direction:t.wind_direction.value,wind_speed:t.wind_speed.value,since:e};x(c),T({metar:!1})})).catch((function(t){return console.log("METAR fetch error: "+t)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),z=function(){var t=Object(w.a)(N.a.mark((function t(){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(a,{headers:{Authorization:"TOKEN ".concat(s)}}).then((function(t){return t.json()})).then((function(t){var e={raw:t.raw};y(e),T({taf:!1})})).catch((function(t){return console.log("TAF fetch error: "+t)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),F=function(t){var e=t;return(e=Math.floor(100*e)/100).toFixed(2)},D=function(t){var e=(new Date).getTimezoneOffset(),c=new Date,n=parseInt(e/60),a=parseInt(t.raw.slice(5,7)),s=(parseInt(t.raw.slice(7,9))-n)%12,r=parseInt(t.raw.slice(9,11)),i=function(t){var e=Math.floor((new Date-t)/1e3),c=e/31536e3;return c>1?Math.floor(c)+" years":(c=e/2592e3)>1?Math.floor(c)+" months":(c=e/86400)>1?Math.floor(c)+" days":(c=e/3600)>1?Math.floor(c)+" hours":(c=e/60)>1?Math.floor(c)+" minutes":Math.floor(e)+" seconds"}(new Date(c.getFullYear(),c.getMonth(),a,s,r,0,0));return i.includes("minutes")?"".concat(i," ago"):"expired"};return Object(n.useEffect)((function(){return C()}),[]),Object(n.useEffect)((function(){return R()}),[]),Object(n.useEffect)((function(){return z()}),[]),M.info&&M.metar&&M.taf?Object(u.jsx)("div",{className:"main",children:Object(u.jsx)("div",{className:"home justify-center items-center small",children:Object(u.jsx)("h1",{children:"Loading..."})})}):Object(u.jsxs)("div",{className:"main",children:[Object(u.jsxs)("div",{className:"nav flex-row",children:[Object(u.jsx)("button",{onClick:function(t){return I.goBack()},className:"material-icon left",children:Object(u.jsx)(b.a,{className:"material-icon"})}),Object(u.jsx)("h2",{className:"material-icon",children:j.iata?j.iata+"/"+j.icao:j.icao}),Object(u.jsx)("button",{onClick:function(t){return function(){var t=F(j.lat)+","+F(j.lon);I.push("/location/".concat(t,"/").concat(j.icao))}()},children:Object(u.jsx)(O.a,{className:"material-icon right"})})]}),Object(u.jsxs)("div",{className:"home",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{className:"text",children:j.name}),Object(u.jsx)("p",{className:"text",children:j.country})]}),Object(u.jsxs)("div",{className:"container self-center overflow-scroll flex-col",children:[" ",Object(u.jsxs)("div",{className:"flex-row right",children:[Object(u.jsx)("p",{className:"text bold",children:"METAR"}),Object(u.jsxs)("div",{className:"flex-row",children:[Object(u.jsxs)("p",{className:"text",children:[" ",0===f.wind_speed?"Wind calm":"".concat(f.wind_speed," kts ").concat(f.wind_direction,"\xba")]}),Object(u.jsx)("p",{className:"text condition ".concat(_),children:f.flight_rules})]})]})," ",Object(u.jsx)("p",{className:"text right data-font",children:f.raw}),Object(u.jsx)("div",{className:"flex-row justify-end right",children:Object(u.jsx)("p",{className:"time-ago bottom ".concat(f.since),children:f.since})})]})," ",Object(u.jsxs)("div",{className:"container big self-center overflow-scroll",children:[" ",Object(u.jsx)("div",{className:"flex-row right",children:Object(u.jsx)("p",{className:"text bold",children:"TAF"})}),Object(u.jsx)("div",{className:"text right data-font",children:g.raw})]}),Object(u.jsxs)("div",{className:"container big self-center",children:[" ",Object(u.jsx)("div",{className:"flex-row right",children:Object(u.jsx)("p",{className:"text bold",children:"Airport Info"})}),Object(u.jsxs)("div",{className:"flex-col",children:[Object(u.jsxs)("p",{className:"text left small",children:[Object(u.jsx)("span",{className:"bold",children:"Coordinates: "}),Object(u.jsxs)("span",{className:"text small left data-font",children:[" ",F(j.lat)," ",F(j.lon)]})," "]}),Object(u.jsxs)("p",{className:"text left small",children:[Object(u.jsx)("span",{className:"bold",children:"Elevation: "})," ",Object(u.jsxs)("span",{className:"text small left data-font",children:[" ",j.elev_ft,"ft / ",j.elev_m,"m"]})," "]}),j.runways&&function(){var t=j.runways.map((function(t){return Object(u.jsxs)("span",{className:"text small left data-font runway",children:[t.ident1,"/",t.ident2]})}));return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("p",{className:"text left small",children:[Object(u.jsx)("span",{className:"bold",children:"Runways: "})," "," "+j.runways.length]}),Object(u.jsx)("p",{className:"text left small",children:t})]})}()]})]}),Object(u.jsx)("button",{className:"nearby button small",onClick:function(t){return function(){var t=F(j.lat)+","+F(j.lon);I.push("/nearby/".concat(t,"/").concat(j.icao))}()},children:Object(u.jsx)("p",{children:"FIND NEARBY"})})]})]})},y=function(t){return Object(u.jsxs)("div",{className:"container self-center container-preview left",children:[Object(u.jsxs)("div",{className:"flex-row right",children:[Object(u.jsx)("p",{className:"text",children:t.name+" "+t.country}),Object(u.jsx)("p",{className:"text bold",children:t.icao})]}),Object(u.jsx)("div",{className:"",children:Object(u.jsx)("p",{className:"text",children:function(t){var e=t;return(e=Math.floor(100*e)/100).toFixed(0)}(t.dist)+" Nm from "+t.from})})]})},E=function(t){var e="https://avwx.rest/api/station/near/".concat(t.coords,"?n=6&airport=true&format=json"),c="".concat("Ex1m3Sv8KRhS4iHe_YKWmsPA7hhUNIfHOC4OEkKbTmQ"),a=Object(n.useState)([]),s=Object(l.a)(a,2),r=s[0],o=s[1],j=r.slice(1).map((function(e){return Object(u.jsx)(i.b,{to:"/station/".concat(e.station.icao),className:"link",children:Object(u.jsx)(y,{icao:e.station.icao,name:e.station.name,dist:e.nautical_miles,country:e.station.country,from:t.ident},e.station.iata)})}));return Object(n.useEffect)((function(){fetch(e,{headers:{Authorization:"TOKEN ".concat(c)}}).then((function(t){return t.json()})).then((function(t){o(t)})).catch((function(t){return console.log("Nearby list fetch error: "+t)}))}),[]),Object(u.jsx)(u.Fragment,{children:j})},A=function(){var t=Object(o.g)().coords,e=Object(o.g)().ident,c=Object(o.f)();return Object(u.jsxs)("div",{className:"main",children:[Object(u.jsxs)("div",{className:"nav flex-row",children:[Object(u.jsx)("button",{onClick:function(t){c.goBack()},className:"material-icon left",children:Object(u.jsx)(b.a,{className:"material-icon"})}),Object(u.jsx)("h2",{className:"material-icon medium",children:"Nearby Airports"}),Object(u.jsx)(b.a,{className:"right invisible"})]}),Object(u.jsx)("div",{className:"home overflow-scroll",children:Object(u.jsx)("div",{children:Object(u.jsx)(E,{coords:t,ident:e})})})]})};var _=function(){return Object(u.jsx)(i.a,{children:Object(u.jsxs)(o.c,{children:[Object(u.jsx)(o.a,{exact:!0,path:"/avweather",component:d}),Object(u.jsx)(o.a,{path:"/station/:ident",component:g}),Object(u.jsx)(o.a,{path:"/nearby/:coords/:ident",component:A}),Object(u.jsx)(o.a,{path:"/location/:coords/:ident",component:p})]})})};r.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(_,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.801be738.chunk.js.map